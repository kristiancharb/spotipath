(this.webpackJsonpspotipath=this.webpackJsonpspotipath||[]).push([[0],{52:function(e,t,a){e.exports=a(62)},57:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(17),c=a.n(s),o=(a(57),a(11)),l=a(68),i=function(e){var t=e.show,a=e.handleClose;return r.a.createElement(l.a,{size:"xl",show:t,onHide:a},r.a.createElement(l.a.Header,{closeButton:!0},r.a.createElement(l.a.Title,null,"About")),r.a.createElement(l.a.Body,null,r.a.createElement("h5",null,"Spotipath lets you explore how closely related your favorite artists are on Spotify"),r.a.createElement("p",null,"When you fill out the form it'll find a path between the two artists you entered using the Spotify API's related artists. Then it'll generate a playlist with songs either either by the artists that are in that path or songs that Spotify would recommend to you based on those artists. You can specify the number of songs per artists included in the playlist."),r.a.createElement("hr",null),r.a.createElement("h4",null,"Inspiration"),r.a.createElement("p",null,"Spotipath was inspired by ",r.a.createElement("a",{href:"http://boilthefrog.playlistmachinery.com/"},"Boil the Frog"),". I thought it was a really cool way of using the Spotify API and decided I wanted to try my hand at recreating it and maybe figuring out a way to put my own spin on it."),r.a.createElement("h4",null,"How it works"),r.a.createElement("p",null,"I pre-fetched artist data for roughly 16,000 artists (this includes their related artists) and stored it in a database. The path finding algorithm uses bidirectional BFS."),r.a.createElement("p",null,"When a request is made for a path between two artists, the algorithm visits those artists' related artists, and their related artists' related artists, and so on. When an artist is encountered that was already encountered by the scan starting at the other artist, the algorithm terminates. The algorithm backtracks down the visited path back to each of the starting artists and returns that path."),r.a.createElement("p",null,"On the client side, the Spotify API is used to fetch these artists' top songs and album covers. This is done client side to reduce load on the server, since the pathfinding is pretty resource intensive. To find out more, check the code on GitHub:"),r.a.createElement("a",{href:"https://github.com/kristiancharb/spotipath-app"},"Spotipath API"),r.a.createElement("br",null),r.a.createElement("a",{href:"https://github.com/kristiancharb/spotipath"},"Spotipath React App")))},u=a(71),m=a(64),d=a(47),h=a(65),p=a(70),f=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],s=t[1];return r.a.createElement(u.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(m.a,null,r.a.createElement(d.a,null,r.a.createElement(h.a,null,r.a.createElement(u.a.Brand,{href:""},"Spotipath"),r.a.createElement(p.a,{className:"mr-auto"},r.a.createElement(p.a.Link,{onClick:function(){return s(!0)}},"About"))))),r.a.createElement(i,{show:a,handleClose:function(){return s(!1)}}))},E=a(8),b=a.n(E),g=a(19),y=a(72),v=function(e){var t=e.artist;return r.a.createElement(y.a,{as:m.a,className:"mt-3"},r.a.createElement(h.a,null,r.a.createElement(d.a,{xs:12},r.a.createElement("h3",{className:"text-dark text-center text-md-left my-2"},t.name)),r.a.createElement(d.a,{xs:{span:8,offset:2},md:{span:4,offset:0}},r.a.createElement(y.a.Img,{variant:"top",className:"m-auto pt-2 pb-2",src:t.tracks[0].imageUrl,alt:"Card image cap"})),r.a.createElement(d.a,{xs:12,md:8},r.a.createElement(y.a.Body,null,t.tracks.map((function(e){return r.a.createElement(y.a.Text,{className:"text-dark",key:e.id},r.a.createElement("strong",null,e.name)," - ",e.artistName)}))))))},w=a(50),k="https://www.kristiancharb.online",x=null,j=function(){var e=Object(g.a)(b.a.mark((function e(t,a){var n,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}return e.next=3,fetch(t,a);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,fetch(t);case 8:e.t0=e.sent;case 9:return n=e.t0,e.next=12,n.json();case 12:if(r=e.sent,n.ok){e.next=16;break}throw s=(null===r||void 0===r?void 0:r.error)?r.error:"An error occurred. Please try again later.",new Error(s);case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),S=function(e){if(Array.isArray(e.artists)&&e.artists.length>0)return e.artists.map((function(e){return e.name})).join(", ")},O=function(e){if(Array.isArray(e.artists)&&e.artists.length>0)return e.artists[0].id},A=function(e){return e.hasOwnProperty("album")&&Array.isArray(e.album.images)&&e.album.images.length>0?e.album.images[0].url:"http://via.placeholder.com/300x180"},I=function(){var e=Object(g.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(k,"/access-token/"),e.prev=1,e.next=4,j(t);case 4:a=e.sent,x=a.token,console.log(x),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Failed to get access token"),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(g.a)(b.a.mark((function e(t,a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(k,"/path/?src=").concat(t,"&dest=").concat(a),e.abrupt("return",j(n));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(g.a)(b.a.mark((function e(t,a,n){var r,s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n?"https://api.spotify.com/v1/recommendations?limit=10&market=US&seed_artists=".concat(t.id):"https://api.spotify.com/v1/artists/".concat(t.id,"/top-tracks?market=US"),e.next=3,j(r,{headers:{Authorization:"Bearer ".concat(x)}});case 3:return s=e.sent,c=s.tracks,e.abrupt("return",c.slice(0,a).map((function(e){return{id:e.id,name:e.name,artistId:O(e),artistName:S(e),imageUrl:A(e)}})));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(g.a)(b.a.mark((function e(t){var a,n,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t.src,t.dest);case 2:a=e.sent,n=Object(w.a)(a),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=13;break}return s=r.value,e.next=10,N(s,t.numSongs,t.recommended);case 10:s.tracks=e.sent;case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:return e.abrupt("return",a);case 22:case"end":return e.stop()}}),e,null,[[4,15,18,21]])})));return function(t){return e.apply(this,arguments)}}();I();var P=a(66),D=function(e){var t=e.formData,a=Object(n.useState)([]),s=Object(o.a)(a,2),c=s[0],l=s[1],i=Object(n.useState)(null),u=Object(o.a)(i,2),m=u[0],p=u[1],f=Object(n.useState)(!1),E=Object(o.a)(f,2),y=E[0],w=E[1],k=function(){var e=Object(g.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(t);case 3:a=e.sent,p(null),l(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),p(e.t0.message);case 11:w(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){t.src&&t.dest&&(w(!0),k(t))}),[t]),r.a.createElement("div",null,m&&r.a.createElement(h.a,null,r.a.createElement(d.a,{xs:12,md:10},r.a.createElement(P.a,{variant:"danger",onClose:function(){return p(null)},dismissible:!0},r.a.createElement(P.a.Heading,null,"Uh oh!"),r.a.createElement("p",null,m)))),y&&r.a.createElement(h.a,null,r.a.createElement(d.a,{xs:12,md:10},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border",role:"status","aria-hidden":"true"})))),!y&&c.map((function(e){return r.a.createElement(h.a,{key:e.id},r.a.createElement(d.a,{xs:12,md:10},r.a.createElement(v,{artist:e})))})))},F=a(51),R=a(31),U=a(32),T=a(69),W=a(67),G=function(e){var t=Object(n.useState)(e.initialFormData),a=Object(o.a)(t,2),s=a[0],c=a[1],l=function(e){c(Object(U.a)(Object(U.a)({},s),{},Object(R.a)({},e.target.name,e.target.value.trim())))},i=Object(F.a)(Array(10).keys());return r.a.createElement("div",null,r.a.createElement(h.a,null,r.a.createElement(d.a,{className:"text-dark w-100 my-4",xs:12,md:10},r.a.createElement("h4",null,"Enter two artists on Spotify"),r.a.createElement("h5",null,"We'll find a path between them through related artists and generate a playlist for you with their top songs."))),r.a.createElement(T.a,{className:"text-dark",onSubmit:function(t){t.preventDefault(),e.setFormData(s);var a=function(e){var t=Object.keys(e).map((function(t){var a=e[t];return"".concat(t,"=").concat(a)})).join("&"),a=window.location,n=a.protocol,r=a.host,s=a.pathname;return"".concat(n,"//").concat(r).concat(s,"?").concat(t)}(s);window.history.pushState({path:a},"",a)}},r.a.createElement(T.a.Row,null,r.a.createElement(T.a.Group,{as:d.a,xs:12,md:5,key:"srcArtist",controlId:"srcArtist"},r.a.createElement(T.a.Label,null,"Source Artist"),r.a.createElement(T.a.Control,{name:"src",className:"w-100",placeholder:"Kanye West",defaultValue:s.src,onChange:l})),r.a.createElement(T.a.Group,{as:d.a,xs:12,md:5,key:"destArtist",controlId:"destArtist"},r.a.createElement(T.a.Label,null,"Destination Artist"),r.a.createElement(T.a.Control,{name:"dest",className:"w-100",placeholder:"Elvis Presley",defaultValue:s.dest,onChange:l}))),r.a.createElement(T.a.Row,null,r.a.createElement(T.a.Group,{as:d.a,xs:12,md:10,controlId:"recommended"},r.a.createElement(T.a.Check,{name:"recommended",type:"checkbox",label:"Add recommended songs by artists not necessarily in the path",defaultChecked:s.recommended,onChange:function(e){c(Object(U.a)(Object(U.a)({},s),{},Object(R.a)({},e.target.name,e.target.checked)))}}))),r.a.createElement(T.a.Row,null,r.a.createElement(T.a.Group,{as:d.a,xs:12,md:5,lg:5,controlId:"numSongs"},r.a.createElement(T.a.Label,null,"Maximum number of songs per artist"),r.a.createElement(T.a.Control,{name:"numSongs",as:"select",defaultValue:s.numSongs,onChange:l},i.map((function(e){return r.a.createElement("option",{key:e},e+1)}))))),r.a.createElement(T.a.Row,{className:"w-100"},r.a.createElement(T.a.Group,{as:d.a,xs:4,md:3,lg:2},r.a.createElement(W.a,{variant:"primary",type:"submit"},"Find Path")))))},H=new URLSearchParams(window.location.search),L={src:H.get("src")&&decodeURI(H.get("src")),dest:H.get("dest")&&decodeURI(H.get("dest")),recommended:"true"===H.get("recommended")||!1,numSongs:H.get("numSongs")||1},V=function(){var e=Object(n.useState)(L),t=Object(o.a)(e,2),a=t[0],s=t[1];return r.a.createElement(m.a,null,r.a.createElement(G,{setFormData:s,initialFormData:L}),r.a.createElement(D,{formData:a}))},z=function(){return r.a.createElement("div",null,r.a.createElement(f,null),r.a.createElement(V,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[52,1,2]]]);
//# sourceMappingURL=main.9c5a09eb.chunk.js.map