(this.webpackJsonpspotipath=this.webpackJsonpspotipath||[]).push([[0],{42:function(e,t,a){e.exports=a(52)},47:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),s=a.n(c),l=(a(47),a(59)),o=a(54),i=a(36),u=a(55),m=a(58),p=function(){return r.a.createElement(l.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(o.a,null,r.a.createElement(i.a,null,r.a.createElement(u.a,null,r.a.createElement(l.a.Brand,{href:"#home"},"Spotipath"),r.a.createElement(m.a,{className:"mr-auto"},r.a.createElement(m.a.Link,{href:"#about"},"About"))))))},d=a(11),f=a(6),E=a.n(f),h=a(13),b=a(61),v=function(e){var t=e.artist;return r.a.createElement(b.a,{className:"mt-3"},r.a.createElement(o.a,null,r.a.createElement(u.a,null,r.a.createElement(i.a,{xs:4},r.a.createElement(b.a.Img,{variant:"top",className:"pt-2 pb-2",src:t.tracks[0].imageUrl,alt:"Card image cap"})),r.a.createElement(i.a,{xs:8},r.a.createElement(b.a.Body,null,r.a.createElement(b.a.Title,null,t.name),t.tracks.map((function(e){return r.a.createElement(b.a.Text,{key:e.id},r.a.createElement("strong",null,e.name)," - ",e.artistName)})))))))},g=a(40),k="https://www.kristiancharb.online",x=null,y=function(){var e=Object(h.a)(E.a.mark((function e(t,a){var n,r,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}return e.next=3,fetch(t,a);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,fetch(t);case 8:e.t0=e.sent;case 9:return n=e.t0,e.next=12,n.json();case 12:if(r=e.sent,n.ok){e.next=16;break}throw c=(null===r||void 0===r?void 0:r.error)?r.error:"An error occurred. Please try again later.",new Error(c);case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),w=function(e){if(Array.isArray(e.artists)&&e.artists.length>0)return e.artists[0].name},j=function(e){if(Array.isArray(e.artists)&&e.artists.length>0)return e.artists[0].id},O=function(e){return e.hasOwnProperty("album")&&Array.isArray(e.album.images)&&e.album.images.length>0?e.album.images[0].url:"http://via.placeholder.com/300x180"},N=function(){var e=Object(h.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(k,"/access-token/"),e.prev=1,e.next=4,y(t);case 4:a=e.sent,x=a.token,console.log(x),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Failed to get access token"),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(h.a)(E.a.mark((function e(t,a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(k,"/path/?src=").concat(t,"&dest=").concat(a),e.abrupt("return",y(n));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),S=function(){var e=Object(h.a)(E.a.mark((function e(t,a,n){var r,c,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n?"https://api.spotify.com/v1/recommendations?limit=10&market=US&seed_artists=".concat(t.id):"https://api.spotify.com/v1/artists/".concat(t.id,"/top-tracks?market=US"),e.next=3,y(r,{headers:{Authorization:"Bearer ".concat(x)}});case 3:return c=e.sent,s=c.tracks,e.abrupt("return",s.slice(0,a).map((function(e){return{id:e.id,name:e.name,artistId:j(e),artistName:w(e),imageUrl:O(e)}})));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(h.a)(E.a.mark((function e(t){var a,n,r,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t.src,t.dest);case 2:a=e.sent,n=Object(g.a)(a),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=13;break}return c=r.value,e.next=10,S(c,t.numSongs,t.recommended);case 10:c.tracks=e.sent;case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:return e.abrupt("return",a);case 22:case"end":return e.stop()}}),e,null,[[4,15,18,21]])})));return function(t){return e.apply(this,arguments)}}();N();var I=a(60),B=function(e){var t=e.formData,a=Object(n.useState)([]),c=Object(d.a)(a,2),s=c[0],l=c[1],o=Object(n.useState)(null),m=Object(d.a)(o,2),p=m[0],f=m[1],b=Object(n.useState)(!1),g=Object(d.a)(b,2),k=g[0],x=g[1];return Object(n.useEffect)((function(){t.src&&t.dest&&(x(!0),function(){var e=Object(h.a)(E.a.mark((function e(){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(t);case 3:a=e.sent,l(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f(e.t0.message);case 10:x(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()())}),[t]),r.a.createElement("div",null,p&&r.a.createElement(u.a,null,r.a.createElement(i.a,{xs:12,md:10},r.a.createElement(I.a,{variant:"danger",onClose:function(){return f(null)},dismissible:!0},r.a.createElement(I.a.Heading,null,"Uh oh!"),r.a.createElement("p",null,p)))),k&&r.a.createElement(u.a,null,r.a.createElement(i.a,{xs:12,md:10},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border",role:"status","aria-hidden":"true"})))),!k&&s.map((function(e){return r.a.createElement(u.a,{key:e.id},r.a.createElement(i.a,{xs:12,md:10},r.a.createElement(v,{artist:e})))})))},D=a(41),U=a(28),F=a(31),G=a(57),L=a(56),P=function(e){var t=Object(n.useState)({src:null,dest:null,recommended:!1,numSongs:1}),a=Object(d.a)(t,2),c=a[0],s=a[1],l=function(e){s(Object(F.a)(Object(F.a)({},c),{},Object(U.a)({},e.target.name,e.target.value.trim())))},o=Object(D.a)(Array(10).keys());return r.a.createElement("div",null,r.a.createElement(u.a,null,r.a.createElement(i.a,{className:"w-100 my-4",xs:12,md:10},r.a.createElement("h4",null,"Enter two artists on Spotify"),r.a.createElement("h5",null,"We'll find a path between them through related artists and generate a playlist for you with their top songs."))),r.a.createElement(G.a,{inline:!0,className:"w-100",onSubmit:function(t){t.preventDefault(),e.setFormData(c),console.log(c)}},r.a.createElement(u.a,{className:"w-100"},r.a.createElement(i.a,{xs:12,md:5},r.a.createElement(G.a.Group,{key:"srcArtist",controlId:"srcArtist"},r.a.createElement(G.a.Label,{className:"sr-only"},"Starting Artist"),r.a.createElement(G.a.Control,{name:"src",className:"my-2 w-100",placeholder:"Starting Artist",onChange:l}))),r.a.createElement(i.a,{xs:12,md:5},r.a.createElement(G.a.Group,{key:"destArtist",controlId:"destArtist"},r.a.createElement(G.a.Label,{className:"sr-only"},"Ending Artist"),r.a.createElement(G.a.Control,{name:"dest",className:"my-2 w-100",placeholder:"Ending Artist",onChange:l})))),r.a.createElement(u.a,{className:"w-100 pt-2"},r.a.createElement(i.a,{xs:12,md:10},r.a.createElement(G.a.Group,{controlId:"recommended"},r.a.createElement(G.a.Check,{name:"recommended",type:"checkbox",label:"Add recommended songs by artists not necessarily in the path",onChange:l})))),r.a.createElement(u.a,{className:"w-100 pt-2"},r.a.createElement(i.a,{xs:12,md:10},r.a.createElement(G.a.Group,{controlId:"numSongs"},r.a.createElement(G.a.Label,{className:"mr-4"},"Maximum number of songs per artist: "),r.a.createElement(G.a.Control,{name:"numSongs",className:"px-4",as:"select",onChange:l},o.map((function(e){return r.a.createElement("option",{key:e},e+1)})))))),r.a.createElement(u.a,{className:"w-100 pt-2"},r.a.createElement(i.a,{xs:12,md:6,lg:4},r.a.createElement(L.a,{className:"my-2 w-100",variant:"primary",type:"submit"},"Find Path")))))},W=function(){var e=Object(n.useState)({src:null,dest:null}),t=Object(d.a)(e,2),a=t[0],c=t[1];return r.a.createElement(o.a,null,r.a.createElement(P,{setFormData:c}),r.a.createElement(B,{formData:a}))},J=function(){return r.a.createElement("div",null,r.a.createElement(p,null),r.a.createElement(W,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.0883a270.chunk.js.map